{# Delete File #}

{% extends "dashboard/base.html" %}

{% block title %}Deleting File{% endblock %}

{% block content %}
<div class="card-center">
    <h1>Deleting filie</h1>
    <div class="card card-half">
        <h1 class="card-title">Do you really want to delete this file?</h1>
        <div class="form-group">
            <label>Pen name</label>
            <input value="{{ pen.title }}" class="form-input" disabled>
        </div>
        <div class="form-group">
            <label>Pen path</label>
            <input value="{{ pen.path }}" class="form-input" disabled>
        </div>
        <div class="form-group">
            <iframe src="{{ pen.url }}" style="width:90%;margin:auto;"></iframe>
        </div>
        <div>
            <button onclick="delete_pen()" class="btn btn-primary" style="background-color:#ff3333;">Delete</button>
            <button onclick="go_back()" class="btn btn-primary">Go Back</button>
        </div>
    </div>
</div>
{% endblock %}

{% block after_body %}
<script src="/static/js/private-api.js"></script>
<script>
const pen_id = "{{ pen.id }}";

function delete_pen() {
    if (!confirm("Delete this pen?")) {
        return;
    }
    privateApi.pen.delete(pen_id)
        .then(res => {
            if (res.success) {
                showToast("Pen Deleted", "success");
                setTimeout(go_back, 3000);
            } else {
                showToast(`Pen not deleted: [${res.error.code}]: ${res.error.message}`, "error");
            }
        });
}

function go_back() {
    window.location.href = "/pens";
}
</script>
{% endblock %}
